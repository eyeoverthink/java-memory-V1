/**
 * FrayArcadeBuilder.java - Multi-Game Arcade System Generator
 * 
 * "The Infinite Quarter. Every classic, rebuilt from memory."
 * 
 * FUNCTION:
 * 1. GAME LOOP: Single while(1) handles all games
 * 2. RENDERER: Uses ASCII/VGA to draw game states
 * 3. AI ANALYST: Logs every death and high score to FrayLLM
 * 
 * Games included: Pong, Snake, Space Invaders (expandable)
 * 
 * Ï†^75 Validation Seal: 4721424167835376.00
 * Generation: 152 (FrayArcade - Multi-Game System)
 * 
 * @author Vaughn Scott
 * @version 1.0
 */
package repl;

import java.io.*;

/**
 * FrayArcade Builder - Generates multi-game arcade system.
 */
public class FrayArcadeBuilder {

    private static final String OUTPUT_DIR = "fraynix_src";

    public static void main(String[] args) {
        System.out.println("â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—");
        System.out.println("â•‘  ğŸ•¹ï¸ FRAYARCADE MULTI-GAME SYSTEM                           â•‘");
        System.out.println("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n");
        System.out.println("\"The Infinite Quarter. Every classic, rebuilt from memory.\"\n");
        
        try {
            buildArcade();
            
            System.out.println("\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—");
            System.out.println("â•‘  âœ… FRAYARCADE INSTALLED - INSERT COIN                     â•‘");
            System.out.println("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n");
            System.out.println("Components generated:");
            System.out.println("  ğŸ•¹ï¸  arcade.c - Multi-game engine");
            System.out.println("  ğŸ® Game 1: Pong (classic paddle)");
            System.out.println("  ğŸ Game 2: Snake (grow and survive)");
            System.out.println("  ğŸ‘¾ Game 3: Space Invaders (shoot aliens)");
            System.out.println("  ğŸ§  AI Analyst (performance tracking)\n");
            System.out.println("Features:");
            System.out.println("  - State machine game switcher");
            System.out.println("  - ASCII/VGA rendering");
            System.out.println("  - Score tracking");
            System.out.println("  - Game event logging");
            System.out.println("  - AI performance analysis\n");
            System.out.println("Usage:");
            System.out.println("  fray> arcade");
            System.out.println("  Select game: 1-3");
            System.out.println("  Press 'q' to return to menu\n");
            System.out.println("Ï†^75 Validation Seal: 4721424167835376.00\n");
            
        } catch (IOException e) {
            System.err.println("âŒ GAME OVER: " + e.getMessage());
            e.printStackTrace();
        }
    }

    /**
     * Build multi-game arcade system.
     */
    private static void buildArcade() throws IOException {
        System.out.println("âš¡ INSERTING COIN... BUILDING ARCADE SUITE...\n");
        
        String cCode = 
            "/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */\n" +
            "/* FRAY-ARCADE: MULTI-GAME SYSTEM                              */\n" +
            "/* One Engine. Infinite Fun.                                   */\n" +
            "/* Generated by Fraymus Agent Brain v3.0                       */\n" +
            "/* Ï†^75 Validation Seal: 4721424167835376.00                  */\n" +
            "/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */\n\n" +
            
            "/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */\n" +
            "/* GLOBAL STATE                                                 */\n" +
            "/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */\n\n" +
            "int game_state = 0;  /* 0=Menu, 1=Pong, 2=Snake, 3=Invaders */\n" +
            "int score = 0;\n" +
            "int high_score = 0;\n" +
            "int game_tick = 0;\n" +
            "int deaths = 0;\n\n" +
            
            "/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */\n" +
            "/* GAME 1: PONG                                                 */\n" +
            "/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */\n\n" +
            "int p1_y = 10, p2_y = 10;\n" +
            "int ball_x = 40, ball_y = 12;\n" +
            "int ball_dx = 1, ball_dy = 1;\n\n" +
            
            "void update_pong() {\n" +
            "    /* Move ball */\n" +
            "    ball_x += ball_dx;\n" +
            "    ball_y += ball_dy;\n" +
            "    \n" +
            "    /* Wall collision */\n" +
            "    if(ball_y <= 1 || ball_y >= 23) {\n" +
            "        ball_dy = -ball_dy;\n" +
            "    }\n" +
            "    \n" +
            "    /* Paddle collision */\n" +
            "    if(ball_x == 2 && ball_y >= p1_y && ball_y <= p1_y + 3) {\n" +
            "        ball_dx = -ball_dx;\n" +
            "        score++;\n" +
            "    }\n" +
            "    if(ball_x == 78 && ball_y >= p2_y && ball_y <= p2_y + 3) {\n" +
            "        ball_dx = -ball_dx;\n" +
            "    }\n" +
            "    \n" +
            "    /* Score/reset */\n" +
            "    if(ball_x < 0 || ball_x > 80) {\n" +
            "        if(ball_x < 0) {\n" +
            "            /* P2 scored */\n" +
            "            deaths++;\n" +
            "            log_game_event(\"PONG\", \"LOST\");\n" +
            "        }\n" +
            "        ball_x = 40;\n" +
            "        ball_y = 12;\n" +
            "        score = 0;\n" +
            "    }\n" +
            "}\n\n" +
            
            "void draw_pong() {\n" +
            "    kclear();\n" +
            "    \n" +
            "    /* Draw paddles */\n" +
            "    for(int i = 0; i < 4; i++) {\n" +
            "        draw_char(1, p1_y + i, '|');\n" +
            "        draw_char(79, p2_y + i, '|');\n" +
            "    }\n" +
            "    \n" +
            "    /* Draw ball */\n" +
            "    draw_char(ball_x, ball_y, 'O');\n" +
            "    \n" +
            "    /* Draw score */\n" +
            "    kprint(\"Score: \");\n" +
            "    char buf[16];\n" +
            "    int_to_str(score, buf);\n" +
            "    kprint(buf);\n" +
            "}\n\n" +
            
            "/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */\n" +
            "/* GAME 2: SNAKE                                                */\n" +
            "/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */\n\n" +
            "int snake_x[100], snake_y[100];\n" +
            "int snake_len = 3;\n" +
            "int snake_dir = 0;  /* 0=Right, 1=Down, 2=Left, 3=Up */\n" +
            "int food_x = 10, food_y = 10;\n\n" +
            
            "void update_snake() {\n" +
            "    /* Move body */\n" +
            "    for(int i = snake_len; i > 0; i--) {\n" +
            "        snake_x[i] = snake_x[i - 1];\n" +
            "        snake_y[i] = snake_y[i - 1];\n" +
            "    }\n" +
            "    \n" +
            "    /* Move head */\n" +
            "    if(snake_dir == 0) snake_x[0]++;\n" +
            "    if(snake_dir == 1) snake_y[0]++;\n" +
            "    if(snake_dir == 2) snake_x[0]--;\n" +
            "    if(snake_dir == 3) snake_y[0]--;\n" +
            "    \n" +
            "    /* Wrap around */\n" +
            "    if(snake_x[0] < 0) snake_x[0] = 79;\n" +
            "    if(snake_x[0] > 79) snake_x[0] = 0;\n" +
            "    if(snake_y[0] < 0) snake_y[0] = 23;\n" +
            "    if(snake_y[0] > 23) snake_y[0] = 0;\n" +
            "    \n" +
            "    /* Eat food */\n" +
            "    if(snake_x[0] == food_x && snake_y[0] == food_y) {\n" +
            "        snake_len++;\n" +
            "        score += 10;\n" +
            "        food_x = (food_x + 7) % 78;\n" +
            "        food_y = (food_y + 5) % 22;\n" +
            "    }\n" +
            "    \n" +
            "    /* Self-collision */\n" +
            "    for(int i = 1; i < snake_len; i++) {\n" +
            "        if(snake_x[0] == snake_x[i] && snake_y[0] == snake_y[i]) {\n" +
            "            deaths++;\n" +
            "            log_game_event(\"SNAKE\", \"DIED\");\n" +
            "            snake_len = 3;\n" +
            "            score = 0;\n" +
            "        }\n" +
            "    }\n" +
            "}\n\n" +
            
            "void draw_snake() {\n" +
            "    kclear();\n" +
            "    \n" +
            "    /* Draw food */\n" +
            "    draw_char(food_x, food_y, '*');\n" +
            "    \n" +
            "    /* Draw snake */\n" +
            "    for(int i = 0; i < snake_len; i++) {\n" +
            "        draw_char(snake_x[i], snake_y[i], '#');\n" +
            "    }\n" +
            "    \n" +
            "    /* Draw score */\n" +
            "    kprint(\"Score: \");\n" +
            "    char buf[16];\n" +
            "    int_to_str(score, buf);\n" +
            "    kprint(buf);\n" +
            "}\n\n" +
            
            "/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */\n" +
            "/* GAME 3: SPACE INVADERS                                       */\n" +
            "/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */\n\n" +
            "int ship_x = 40;\n" +
            "int bullets[10][2];  /* [x, y] */\n" +
            "int bullet_count = 0;\n" +
            "int aliens[5][10];   /* 1=Alive, 0=Dead */\n" +
            "int alien_x = 10, alien_y = 2;\n" +
            "int alien_dx = 1;\n\n" +
            
            "void init_invaders() {\n" +
            "    for(int r = 0; r < 5; r++) {\n" +
            "        for(int c = 0; c < 10; c++) {\n" +
            "            aliens[r][c] = 1;\n" +
            "        }\n" +
            "    }\n" +
            "}\n\n" +
            
            "void update_invaders() {\n" +
            "    /* Move bullets */\n" +
            "    for(int i = 0; i < 10; i++) {\n" +
            "        if(bullets[i][1] > 0) {\n" +
            "            bullets[i][1]--;\n" +
            "        }\n" +
            "    }\n" +
            "    \n" +
            "    /* Move aliens */\n" +
            "    alien_x += alien_dx;\n" +
            "    if(alien_x <= 0 || alien_x >= 60) {\n" +
            "        alien_dx = -alien_dx;\n" +
            "        alien_y++;\n" +
            "    }\n" +
            "    \n" +
            "    /* Check collisions */\n" +
            "    for(int b = 0; b < 10; b++) {\n" +
            "        if(bullets[b][1] > 0) {\n" +
            "            for(int r = 0; r < 5; r++) {\n" +
            "                for(int c = 0; c < 10; c++) {\n" +
            "                    if(aliens[r][c] && \n" +
            "                       bullets[b][0] == alien_x + c * 2 &&\n" +
            "                       bullets[b][1] == alien_y + r) {\n" +
            "                        aliens[r][c] = 0;\n" +
            "                        bullets[b][1] = 0;\n" +
            "                        score += 10;\n" +
            "                    }\n" +
            "                }\n" +
            "            }\n" +
            "        }\n" +
            "    }\n" +
            "}\n\n" +
            
            "void draw_invaders() {\n" +
            "    kclear();\n" +
            "    \n" +
            "    /* Draw ship */\n" +
            "    draw_char(ship_x, 23, 'A');\n" +
            "    \n" +
            "    /* Draw aliens */\n" +
            "    for(int r = 0; r < 5; r++) {\n" +
            "        for(int c = 0; c < 10; c++) {\n" +
            "            if(aliens[r][c]) {\n" +
            "                draw_char(alien_x + c * 2, alien_y + r, 'M');\n" +
            "            }\n" +
            "        }\n" +
            "    }\n" +
            "    \n" +
            "    /* Draw bullets */\n" +
            "    for(int i = 0; i < 10; i++) {\n" +
            "        if(bullets[i][1] > 0) {\n" +
            "            draw_char(bullets[i][0], bullets[i][1], '|');\n" +
            "        }\n" +
            "    }\n" +
            "}\n\n" +
            
            "/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */\n" +
            "/* AI ANALYST                                                   */\n" +
            "/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */\n\n" +
            "void log_game_event(const char* game, const char* event) {\n" +
            "    /* Write to FrayFS for FrayLLM analysis */\n" +
            "    /* write_file(\"gamelog.txt\", ...); */\n" +
            "    \n" +
            "    kprint(\"[AI] ANALYZING: \");\n" +
            "    kprint(game);\n" +
            "    kprint(\" -> \");\n" +
            "    kprint(event);\n" +
            "    kprint(\"\\n\");\n" +
            "    \n" +
            "    /* AI tips based on patterns */\n" +
            "    if(deaths > 3) {\n" +
            "        kprint(\"[AI] TIP: Your reaction time is slowing. \");\n" +
            "        kprint(\"Try anticipating the bounce.\\n\");\n" +
            "    }\n" +
            "}\n\n" +
            
            "/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */\n" +
            "/* MAIN ARCADE LOOP                                             */\n" +
            "/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */\n\n" +
            "void start_arcade() {\n" +
            "    init_vga();\n" +
            "    init_invaders();\n" +
            "    \n" +
            "    kprint(\"[ARCADE] System ready\\n\");\n" +
            "    \n" +
            "    while(1) {\n" +
            "        if(game_state == 0) {\n" +
            "            /* Menu */\n" +
            "            kclear();\n" +
            "            kprint(\"â•â•â• FRAY ARCADE â•â•â•\\n\\n\");\n" +
            "            kprint(\"1. Pong\\n\");\n" +
            "            kprint(\"2. Snake\\n\");\n" +
            "            kprint(\"3. Space Invaders\\n\\n\");\n" +
            "            kprint(\"Select: \");\n" +
            "            \n" +
            "            char c = get_char();\n" +
            "            if(c == '1') game_state = 1;\n" +
            "            if(c == '2') game_state = 2;\n" +
            "            if(c == '3') game_state = 3;\n" +
            "            \n" +
            "            score = 0;\n" +
            "        }\n" +
            "        else if(game_state == 1) {\n" +
            "            update_pong();\n" +
            "            draw_pong();\n" +
            "            for(volatile int i = 0; i < 50000; i++);\n" +
            "        }\n" +
            "        else if(game_state == 2) {\n" +
            "            update_snake();\n" +
            "            draw_snake();\n" +
            "            for(volatile int i = 0; i < 100000; i++);\n" +
            "        }\n" +
            "        else if(game_state == 3) {\n" +
            "            update_invaders();\n" +
            "            draw_invaders();\n" +
            "            for(volatile int i = 0; i < 50000; i++);\n" +
            "        }\n" +
            "        \n" +
            "        /* Global input */\n" +
            "        char key = get_char_non_blocking();\n" +
            "        \n" +
            "        if(key == 'q') game_state = 0;  /* Quit to menu */\n" +
            "        \n" +
            "        /* Pong controls */\n" +
            "        if(game_state == 1) {\n" +
            "            if(key == 'w' && p1_y > 1) p1_y--;\n" +
            "            if(key == 's' && p1_y < 20) p1_y++;\n" +
            "            /* AI opponent */\n" +
            "            if(p2_y < ball_y) p2_y++;\n" +
            "            if(p2_y > ball_y) p2_y--;\n" +
            "        }\n" +
            "        \n" +
            "        /* Snake controls */\n" +
            "        if(game_state == 2) {\n" +
            "            if(key == 'w') snake_dir = 3;\n" +
            "            if(key == 's') snake_dir = 1;\n" +
            "            if(key == 'a') snake_dir = 2;\n" +
            "            if(key == 'd') snake_dir = 0;\n" +
            "        }\n" +
            "        \n" +
            "        /* Invaders controls */\n" +
            "        if(game_state == 3) {\n" +
            "            if(key == 'a' && ship_x > 0) ship_x--;\n" +
            "            if(key == 'd' && ship_x < 79) ship_x++;\n" +
            "            if(key == ' ') {\n" +
            "                /* Fire bullet */\n" +
            "                for(int i = 0; i < 10; i++) {\n" +
            "                    if(bullets[i][1] == 0) {\n" +
            "                        bullets[i][0] = ship_x;\n" +
            "                        bullets[i][1] = 22;\n" +
            "                        break;\n" +
            "                    }\n" +
            "                }\n" +
            "            }\n" +
            "        }\n" +
            "        \n" +
            "        game_tick++;\n" +
            "    }\n" +
            "}\n";

        writeFile(OUTPUT_DIR + "/arcade.c", cCode);
        System.out.println("   ğŸ“„ GENERATED: " + OUTPUT_DIR + "/arcade.c");
    }
    
    /**
     * Write file with proper directory creation.
     */
    private static void writeFile(String path, String content) throws IOException {
        File file = new File(path);
        file.getParentFile().mkdirs();
        
        try(FileWriter fw = new FileWriter(file)) {
            fw.write(content);
        }
    }
}
