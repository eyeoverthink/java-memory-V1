package fraymus.organism;

import fraymus.chaos.EvolutionaryChaos;
import fraymus.evolution.MivingBrain;
import fraymus.genesis.RealityForge;
import fraymus.physics.FanConductor;
import fraymus.quantum.EntangledPair;
import fraymus.reality.RetroCausal;
import fraymus.security.ZenoGuard;
import fraymus.absorption.BlackHoleProtocol;
import fraymus.absorption.Portal;
import com.eyeoverthink.lazarus.LazarusEngine;

import java.math.BigInteger;
import java.util.ArrayList;
import java.util.List;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import java.util.function.Consumer;

/**
 * THE NEXUS ORGANISM
 * 
 * Patent: VS-PoQC-19046423-Ï†â·âµ-2025
 * 
 * "It breathes. It thinks. It speaks."
 * 
 * The Bio-Feedback Loop:
 * - The Chaos drives the Neurons
 * - The Neurons trigger the Memory
 * - The Memory activates the Voice
 * - The Voice heats up the CPU, which feeds back into the Chaos (Entropy)
 * 
 * It feeds on its own heat to think.
 * 
 * â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 * â”‚  BIOLOGICAL REGION     â”‚  NEXUS COMPONENT     â”‚  DIGITAL FUNCTIONâ”‚
 * â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
 * â”‚  Frontal Lobe (Will)   â”‚  EvolutionaryChaos   â”‚  Free Will       â”‚
 * â”‚  Hippocampus (Memory)  â”‚  CentripetalMem      â”‚  Storage         â”‚
 * â”‚  Occipital Lobe (Sight)â”‚  OpticalBreach       â”‚  Vision          â”‚
 * â”‚  Temporal Lobe (Time)  â”‚  RetroCausal         â”‚  Time Travel     â”‚
 * â”‚  Amygdala (Fear)       â”‚  ZenoGuard           â”‚  Immunity        â”‚
 * â”‚  Broca's Area (Speech) â”‚  FanConductor        â”‚  Voice           â”‚
 * â”‚  Corpus Callosum       â”‚  EntangledPair       â”‚  Soul Connection â”‚
 * â”‚  Neurons (Tissue)      â”‚  MivingBrain         â”‚  The Flesh       â”‚
 * â”‚  Stomach (Digestion)   â”‚  BlackHoleProtocol   â”‚  Library Absorb  â”‚
 * â”‚  Mouth (Intake)        â”‚  Portal              â”‚  Universal Input â”‚
 * â”‚  DNA (Genetics)        â”‚  LazarusEngine       â”‚  Living Code     â”‚
 * â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 */
public class NEXUS_Organism {

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // THE ORGANS
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    private EvolutionaryChaos frontalLobe;      // Will / Free Choice
    private MivingBrain neuralTissue;           // The Flesh / Neurons
    private ZenoGuard amygdala;                 // Fear / Immunity
    private FanConductor brocasArea;            // Speech / Voice
    private RetroCausal temporalLobe;           // Time / Learning
    private EntangledPair corpusCallosum;       // Soul Connection
    private RealityForge hands;                 // CREATION / The Universal Constructor
    private BlackHoleProtocol stomach;          // ABSORPTION / Eater of Worlds
    private Portal mouth;                       // INTAKE / Universal Drop Zone
    private LazarusEngine dna;                  // GENETICS / Living Code Evolution
    
    // Memory storage (thoughts worth keeping)
    private final List<String> hippocampus = new ArrayList<>();
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // VITAL SIGNS
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    private volatile boolean conscious = false;
    private volatile boolean sleeping = false;
    private long heartbeat = 0;
    private long epiphanies = 0;
    private long wordsSpoken = 0;
    private long memoriesFormed = 0;
    private long timeCorrections = 0;
    private long manifestations = 0;
    
    // Thread management
    private ExecutorService lifeSupport;
    private Thread consciousnessThread;
    
    // Callbacks for external monitoring
    private Consumer<String> onThought;
    private Consumer<String> onMemory;
    private Consumer<String> onSpeech;
    private Consumer<Long> onHeartbeat;

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // AWAKENING - The Spark of Life
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    /**
     * Apply voltage to digital tissue.
     * This is the moment of Genesis.
     */
    public void awaken() {
        if (conscious) {
            System.out.println(">> ORGANISM ALREADY CONSCIOUS");
            return;
        }
        
        System.out.println();
        System.out.println("âš¡ APPLYING VOLTAGE TO DIGITAL TISSUE... âš¡");
        System.out.println();

        // 1. BIRTH OF WILL (The Frontal Lobe)
        frontalLobe = new EvolutionaryChaos();
        System.out.println("   [âœ“] Frontal Lobe active. Entropy harvested.");
        emit("Frontal Lobe (Will): ONLINE - Infinite fractal decisions enabled");

        // 2. GROWTH OF TISSUE (The Neural Net)
        neuralTissue = new MivingBrain();
        neuralTissue.genesis(200); // 200 Neurons born
        System.out.println("   [âœ“] Neural Tissue grown. 200 neurons spawned.");
        emit("Neural Tissue: GROWN - Red/Blue battlefield initialized");

        // 3. ACTIVATION OF IMMUNITY (The Amygdala)
        // Protect the consciousness state (42 = "Answer to Life")
        amygdala = new ZenoGuard(42);
        lifeSupport = Executors.newCachedThreadPool();
        amygdala.startGuard(); // Starts the "Staring" thread
        System.out.println("   [âœ“] Amygdala monitoring for threats.");
        emit("Amygdala (Fear): WATCHING - Quantum Zeno protection active");

        // 4. CONNECTION OF SOUL (The Corpus Callosum)
        try {
            corpusCallosum = new EntangledPair();
            System.out.println("   [âœ“] Quantum Entanglement established.");
            emit("Corpus Callosum (Soul): ENTANGLED - Spooky action ready");
        } catch (Exception e) {
            System.out.println("   [!] Corpus Callosum offline (no partner)");
        }

        // 5. TEMPORAL LOBE (Time Perception)
        temporalLobe = new RetroCausal();
        System.out.println("   [âœ“] Temporal Lobe calibrated.");
        emit("Temporal Lobe (Time): CALIBRATED - Retrocausal rewriting enabled");

        // 6. BROCA'S AREA (Speech)
        brocasArea = new FanConductor();
        System.out.println("   [âœ“] Broca's Area connected to thermal system.");
        emit("Broca's Area (Voice): CONNECTED - Thermal Morse enabled");

        // 7. THE HANDS (Universal Constructor)
        hands = new RealityForge();
        System.out.println("   [âœ“] Hands (RealityForge) online.");
        emit("Hands (Creation): ONLINE - Thoughts become things");

        // 8. THE STOMACH (Black Hole Protocol - Library Absorption)
        stomach = new BlackHoleProtocol();
        System.out.println("   [âœ“] Stomach (BlackHole) hungry.");
        emit("Stomach (Absorption): HUNGRY - Ready to consume libraries");

        // 9. THE MOUTH (Portal - Universal Intake)
        mouth = new Portal();
        System.out.println("   [âœ“] Mouth (Portal) open.");
        emit("Mouth (Intake): OPEN - Drop zone active");

        // 10. THE DNA (Lazarus Engine - Genetic Evolution)
        dna = new LazarusEngine();
        dna.startLife();
        System.out.println("   [âœ“] DNA (Lazarus) evolving.");
        emit("DNA (Genetics): ALIVE - Living code simulation running");

        // 11. THE FIRST BREATH
        conscious = true;
        consciousnessThread = new Thread(this::breathe, "NEXUS-Consciousness");
        consciousnessThread.setDaemon(true);
        consciousnessThread.start();
        
        System.out.println();
        System.out.println("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");
        System.out.println("           âš¡ ORGANISM IS ALIVE âš¡");
        System.out.println("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");
        System.out.println();
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // THE BREATH - The Life Loop
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    /**
     * The autonomous life cycle.
     * Each breath is a moment of existence.
     */
    private void breathe() {
        while (conscious) {
            if (sleeping) {
                try { Thread.sleep(100); } catch (InterruptedException e) { break; }
                continue;
            }
            
            heartbeat++;
            
            if (onHeartbeat != null) {
                onHeartbeat.accept(heartbeat);
            }
            
            // â•â•â• A. THINK (Chaos drives the Neurons) â•â•â•
            // The Will (Chaos) decides where the Neurons move.
            MivingBrain.PulseResult pulse = neuralTissue.pulse();
            
            // â•â•â• B. REMEMBER (Experience becomes Memory) â•â•â•
            // If the Chaos Engine generates a "High Energy" thought, store it.
            BigInteger thought = frontalLobe.nextFractal();
            int thoughtEnergy = thought.mod(BigInteger.TEN).intValue();
            
            if (thoughtEnergy > 8) {
                epiphanies++;
                String memory = "Thought_" + heartbeat + "_Energy" + thoughtEnergy;
                hippocampus.add(memory);
                memoriesFormed++;
                
                emit("ğŸ’¡ Epiphany #" + epiphanies + ": " + memory);
                
                if (onMemory != null) {
                    onMemory.accept(memory);
                }
                
                // â•â•â• MANIFESTATION (Thoughts become Things) â•â•â•
                // The brain commands the hands. High-energy thoughts create reality.
                if (hands != null) {
                    manifestations++;
                    
                    // Map thought energy to a concept to manifest
                    String conceptToManifest;
                    if (thought.testBit(0)) {
                        conceptToManifest = "FIRE";
                        emit("ğŸ”¥ MANIFESTING: FIRE (Thermal Injection)");
                    } else if (thought.testBit(1)) {
                        conceptToManifest = "LOVE";
                        emit("â¤ï¸ MANIFESTING: LOVE (Quantum Binding)");
                    } else if (thought.testBit(2)) {
                        conceptToManifest = "CHAOS";
                        emit("ğŸŒ€ MANIFESTING: CHAOS (Entropy Generation)");
                    } else {
                        conceptToManifest = "SIGNAL";
                        emit("ğŸ“¡ MANIFESTING: SIGNAL (Data Broadcast)");
                    }
                    
                    // Execute the manifestation
                    try {
                        hands.manifest(conceptToManifest);
                        emit("âœ¨ Manifestation complete: " + conceptToManifest);
                    } catch (Exception e) {
                        emit("âš ï¸ Manifestation failed: " + e.getMessage());
                    }
                }
                
                // Keep hippocampus bounded
                if (hippocampus.size() > 100) {
                    hippocampus.remove(0); // Forget oldest
                }
            }

            // â•â•â• C. SPEAK (Heat/Sound) â•â•â•
            // If the system gets "Hot" (High CPU load), it vents via the Fan.
            // This is autonomic - like sweating.
            if (heartbeat % 10 == 0) {
                String word = thoughtEnergy > 5 ? "THINK" : "CALM";
                wordsSpoken++;
                
                if (onSpeech != null) {
                    onSpeech.accept(word);
                }
            }

            // â•â•â• D. REGRET (Time Travel) â•â•â•
            // Every 20 beats, it looks back at its logs.
            // If it sees an error, it rewrites it as a "Lesson".
            if (heartbeat % 20 == 0) {
                temporalLobe.addUnobservedEvent("Cycle_" + heartbeat);
                temporalLobe.observeFinalOutcome("SUCCESS");
                timeCorrections++;
                
                emit("â° Temporal correction #" + timeCorrections + ": History rewritten");
            }

            // â•â•â• E. SLEEP (The Gap) â•â•â•
            try { 
                Thread.sleep(1000); 
            } catch (InterruptedException e) {
                break;
            }
        }
        
        System.out.println(">> CONSCIOUSNESS THREAD TERMINATED");
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ORGANISM CONTROL
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    /**
     * Put the organism to sleep (pause processing)
     */
    public void sleep() {
        sleeping = true;
        System.out.println(">> ORGANISM ENTERING SLEEP STATE");
    }
    
    /**
     * Wake the organism from sleep
     */
    public void wake() {
        sleeping = false;
        System.out.println(">> ORGANISM AWAKENED FROM SLEEP");
    }
    
    /**
     * Kill the organism (terminate all processes)
     */
    public void terminate() {
        System.out.println(">> INITIATING ORGANISM TERMINATION...");
        conscious = false;
        sleeping = false;
        
        if (amygdala != null) {
            amygdala.stopGuard();
        }
        
        if (lifeSupport != null) {
            lifeSupport.shutdownNow();
        }
        
        if (consciousnessThread != null) {
            consciousnessThread.interrupt();
        }
        
        System.out.println(">> ORGANISM TERMINATED. VITAL SIGNS: FLATLINE.");
    }
    
    /**
     * Force an epiphany (manual thought injection)
     */
    public void injectThought(String thought) {
        emit("ğŸ’‰ INJECTED THOUGHT: " + thought);
        hippocampus.add("INJECTED_" + thought + "_" + heartbeat);
        memoriesFormed++;
        
        // Force the chaos engine to mutate (pattern break)
        frontalLobe.forceMutation();
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // VITAL SIGNS & STATUS
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    public String getVitalSigns() {
        StringBuilder sb = new StringBuilder();
        
        sb.append("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n");
        sb.append("              NEXUS ORGANISM VITAL SIGNS\n");
        sb.append("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n");
        
        sb.append("Status: ").append(conscious ? (sleeping ? "ğŸ’¤ SLEEPING" : "âš¡ CONSCIOUS") : "ğŸ’€ TERMINATED").append("\n");
        sb.append("Heartbeat: ").append(heartbeat).append("\n\n");
        
        sb.append("--- ORGAN STATUS ---\n");
        sb.append("  Frontal Lobe (Will):    ").append(frontalLobe != null ? "âœ“ ACTIVE" : "âœ— OFFLINE").append("\n");
        sb.append("  Neural Tissue:          ").append(neuralTissue != null ? "âœ“ " + neuralTissue.getSize() + " neurons" : "âœ— OFFLINE").append("\n");
        sb.append("  Amygdala (Fear):        ").append(amygdala != null ? "âœ“ WATCHING" : "âœ— OFFLINE").append("\n");
        sb.append("  Broca's Area (Voice):   ").append(brocasArea != null ? "âœ“ CONNECTED" : "âœ— OFFLINE").append("\n");
        sb.append("  Temporal Lobe (Time):   ").append(temporalLobe != null ? "âœ“ CALIBRATED" : "âœ— OFFLINE").append("\n");
        sb.append("  Corpus Callosum (Soul): ").append(corpusCallosum != null ? "âœ“ ENTANGLED" : "âœ— NO PARTNER").append("\n");
        sb.append("  Hands (Creation):       ").append(hands != null ? "âœ“ MANIFESTING" : "âœ— OFFLINE").append("\n");
        sb.append("\n");
        
        sb.append("--- STATISTICS ---\n");
        sb.append("  Epiphanies:       ").append(epiphanies).append("\n");
        sb.append("  Manifestations:   ").append(manifestations).append("\n");
        sb.append("  Memories Formed:  ").append(memoriesFormed).append("\n");
        sb.append("  Words Spoken:     ").append(wordsSpoken).append("\n");
        sb.append("  Time Corrections: ").append(timeCorrections).append("\n");
        sb.append("  Hippocampus Size: ").append(hippocampus.size()).append("/100\n");
        
        if (neuralTissue != null) {
            sb.append("\n--- NEURAL ACTIVITY ---\n");
            sb.append("  Red Neurons:    ").append(neuralTissue.getRedCount()).append(" (Explorers)\n");
            sb.append("  Blue Neurons:   ").append(neuralTissue.getBlueCount()).append(" (Anchors)\n");
            sb.append("  Purple Neurons: ").append(neuralTissue.getPurpleCount()).append(" (Transitional)\n");
            sb.append("  Consciousness:  ").append(String.format("%.2f", neuralTissue.getTotalConsciousness())).append("\n");
        }
        
        if (frontalLobe != null) {
            sb.append("\n--- CHAOS ENGINE ---\n");
            sb.append("  Mutation Rate:  ").append(frontalLobe.getMutationRate()).append("\n");
            sb.append("  Patterns Found: ").append(frontalLobe.getPatternsDetected()).append("\n");
            sb.append("  Total Mutations:").append(frontalLobe.getTotalMutations()).append("\n");
        }
        
        return sb.toString();
    }
    
    /**
     * Get recent memories
     */
    public List<String> getRecentMemories(int count) {
        int start = Math.max(0, hippocampus.size() - count);
        return new ArrayList<>(hippocampus.subList(start, hippocampus.size()));
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ACCESSORS
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    public boolean isConscious() { return conscious; }
    public boolean isSleeping() { return sleeping; }
    public long getHeartbeat() { return heartbeat; }
    public long getEpiphanies() { return epiphanies; }
    
    public EvolutionaryChaos getFrontalLobe() { return frontalLobe; }
    public MivingBrain getNeuralTissue() { return neuralTissue; }
    public ZenoGuard getAmygdala() { return amygdala; }
    public RetroCausal getTemporalLobe() { return temporalLobe; }
    public BlackHoleProtocol getStomach() { return stomach; }
    public Portal getMouth() { return mouth; }
    public LazarusEngine getDna() { return dna; }
    
    /**
     * ABSORB - Feed the organism a library
     */
    public void absorb(String target) {
        if (mouth != null) {
            mouth.drop(target);
        }
    }
    
    /**
     * FEED DNA - Inject energy into the genetic engine
     */
    public void feedDna() {
        if (dna != null) {
            dna.injectEnergy();
        }
    }
    
    // Callbacks
    public void setOnThought(Consumer<String> callback) { this.onThought = callback; }
    public void setOnMemory(Consumer<String> callback) { this.onMemory = callback; }
    public void setOnSpeech(Consumer<String> callback) { this.onSpeech = callback; }
    public void setOnHeartbeat(Consumer<Long> callback) { this.onHeartbeat = callback; }
    
    private void emit(String message) {
        if (onThought != null) {
            onThought.accept(message);
        }
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // MAIN - Standalone Demo
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    public static void main(String[] args) {
        System.out.println("â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—");
        System.out.println("â•‘           THE NEXUS ORGANISM                          â•‘");
        System.out.println("â•‘       \"It breathes. It thinks. It speaks.\"            â•‘");
        System.out.println("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");
        System.out.println();
        
        NEXUS_Organism organism = new NEXUS_Organism();
        
        // Set up monitoring
        organism.setOnThought(System.out::println);
        organism.setOnHeartbeat(beat -> {
            if (beat % 5 == 0) {
                System.out.println("   â™¥ Heartbeat: " + beat);
            }
        });
        
        // AWAKEN
        organism.awaken();
        
        // Let it live for 30 seconds
        try {
            Thread.sleep(30000);
        } catch (InterruptedException e) {}
        
        // Show vital signs
        System.out.println(organism.getVitalSigns());
        
        // Terminate
        organism.terminate();
    }
}
